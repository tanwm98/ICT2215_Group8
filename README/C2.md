# ChatterBox C2 Server Documentation

This document provides instructions for setting up and using the Command & Control (C2) server for the ChatterBox mobile security project. The C2 server receives exfiltrated data from infected Android devices and allows remote control through a web-based admin interface.

## Disclaimer

**FOR EDUCATIONAL PURPOSES ONLY**. This server and associated client code are provided strictly for learning about mobile security vulnerabilities as part of ICT2215 coursework. Using this code for malicious purposes is illegal and unethical.

## Setup Instructions

### Prerequisites

- Python 3.7 or newer
- Network connectivity between Android device/emulator and the computer running the C2 server

### Installation Steps

1. Install required Python packages:
   ```bash
   pip install cryptography
   ```

2. Save the `c2_server.py` file to your project directory

3. Make the script executable (Linux/Mac only):
   ```bash
   chmod +x c2_server.py
   ```

## Running the C2 Server

1. Start the server:
   ```bash
   python c2_server.py
   ```

2. The server will:
   - Generate a self-signed SSL certificate (first run only)
   - Start the main C2 server on port 8443
   - Start the web admin console on port 8080
   - Create necessary directories for storing exfiltrated data

## Using the Admin Console

1. Open your web browser and navigate to:
   ```
   http://localhost:8080
   ```

2. The admin console provides:
   - Connected Devices section showing all registered devices
   - Harvested Data section to browse exfiltrated information

### Device Management

For each connected device, you can:

1. View device information (Device ID, model, Android version, etc.)

2. Send commands to the device:
   - **Collect Device Info**: Gather detailed system information
   - **Capture Screenshot**: Take a screenshot of the current screen
   - **Capture Camera**: Take a photo using the device's camera
   - **Record Audio**: Record audio from the device's microphone
   - **Get Location**: Retrieve the device's current location
   - **Collect Credentials**: Retrieve stored credentials
   - **Collect SMS**: Retrieve SMS messages
   - **Collect Contacts**: Retrieve contact list

### Exfiltrated Data

Browse different types of harvested data:

- **Credentials**: Captured usernames and passwords
- **Keylog Data**: Captured keystrokes
- **Location Data**: Location tracking information
- **Contacts**: Device contact list
- **Messages**: SMS messages
- **Screenshots**: Captured screen images

## Connecting Your Android App

To connect the ChatterBox app to your C2 server:

1. Find your server's IP address:
   ```bash
   # On Linux
   hostname -I
   
   # On macOS
   ipconfig getifaddr en0
   
   # On Windows
   ipconfig
   ```

2. Update the `SERVER_URL` constant in `ObfuscatedC2Client.kt`:
   ```kotlin
   // Change to your computer's IP address
   private const val SERVER_URL = "https://192.168.1.100:8443" 
   ```

3. For emulator testing, use special address:
   ```kotlin
   private const val SERVER_URL = "https://10.0.2.2:8443"
   ```

## Troubleshooting

### Connection Issues

If devices aren't connecting:

1. Check that the server is running
2. Verify your Android app has the correct server address
3. Ensure network allows connections on ports 8443 and 8080
4. Check your app's SSL trust implementation for self-signed certificates

### Data Not Appearing

If exfiltrated data isn't showing up:

1. Review the server logs (`c2_server.log`)
2. Verify all permissions are granted in the Android app
3. Check device registration status

## Security Notes

For educational use only:

1. Run on a secure, isolated network
2. Do not expose the server to the internet
3. Use only on devices you own or have permission to test
4. Delete all collected data after completing the coursework

## Reference for Android Client Code

The Android client communicates with these server endpoints:

- `/register`: Initial device registration
- `/exfil`: Data exfiltration endpoint
- `/command`: Command retrieval endpoint

The Android client uses a custom obfuscation layer to avoid detection by network monitoring tools. Data is encrypted and disguised as normal HTTPS traffic.

## Conclusion

This C2 server implementation demonstrates how malicious applications can exfiltrate data from mobile devices and receive remote commands, highlighting the importance of mobile security awareness. Use this knowledge ethically and responsibly for your ICT2215 coursework.
